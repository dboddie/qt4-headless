Description: recognize the correct architecture on GNU/Hurd.
 Doing the same mangling of `uname -m` done in the config.guess of the widely
 used autotools, we can recognize the correct architecture, and thus using
 non-generic atomic primitives.
Author: Pino Toscano <pino@kde.org>
Forwarded: http://bugreports.qt.nokia.com/browse/QTBUG-7803
--- a/configure
+++ b/configure
@@ -2723,6 +2723,17 @@ fi
 
 if [ -z "${CFG_HOST_ARCH}" ]; then
     case "$UNAME_SYSTEM:$UNAME_RELEASE:$UNAME_MACHINE" in
+    GNU:*:*)
+        CFG_HOST_ARCH=`echo ${UNAME_MACHINE} | sed -e 's,[-/].*$,,'`
+        case "$CFG_HOST_ARCH" in
+            i?86)
+                CFG_HOST_ARCH=i386
+                ;;
+        esac
+        if [ "$OPT_VERBOSE" = "yes" ]; then
+            echo "    GNU/Hurd ($CFG_HOST_ARCH)"
+        fi
+        ;;
     IRIX*:*:*)
         CFG_HOST_ARCH=`uname -p`
         if [ "$OPT_VERBOSE" = "yes" ]; then
